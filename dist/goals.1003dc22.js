var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequireafd0;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,o.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequireafd0=o);var i=o("ilwiq"),a=o("5Rd1x"),s=o("fUhpq"),r=o("jiuw3"),d=o("7MGRS"),l=o("4CEV9");const w={controls:"translate",solvePosition:!0,solveRotation:!1},u={maxIterations:3,divergeThreshold:.005,stallThreshold:.001,translationErrorClamp:.25,rotationErrorClamp:.25,translationConvergeThreshold:.001,rotationConvergeThreshold:.001,restPoseFactor:.001};let c,p,h,m,f,v,g,E,x,C,P,R,b;!function(){p=new d.default,document.body.appendChild(p.dom),h=document.getElementById("output"),m=new i.WebGLRenderer({antialias:!0}),m.setPixelRatio(window.devicePixelRatio),m.setSize(window.innerWidth,window.innerHeight),m.outputEncoding=i.sRGBEncoding,document.body.appendChild(m.domElement),v=new i.PerspectiveCamera(50,window.innerWidth/window.innerHeight),v.position.set(8,8,8),f=new i.Scene,f.background=new i.Color(1250841);const e=new i.DirectionalLight;e.position.set(1,3,2),f.add(e);const t=new i.AmbientLight(2503224,1);f.add(t),P=new a.OrbitControls(v,m.domElement),R=new s.TransformControls(v,m.domElement),R.setSpace("local"),f.add(R),R.addEventListener("mouseDown",(()=>P.enabled=!1)),R.addEventListener("mouseUp",(()=>P.enabled=!0)),b=new i.Group,b.position.set(0,1,1),f.add(b),R.attach(b),x=null;let n=null;for(let e=0;e<6;e++){const t=new l.Link,o=new l.Joint;o.setPosition(0,.5,0),o.setDoF(e%2?l.DOF.EX:l.DOF.EZ),o.setDoFValues(Math.PI/4),o.setRestPoseValues(Math.PI/4),o.restPoseSet=!0,o.setMinLimits(-.9*Math.PI),o.setMaxLimits(.9*Math.PI),t.addChild(o),n&&n.addChild(t),null===x&&(x=t),n=o}const o=new l.Link;function D(){const e=[];w.solvePosition&&e.push(l.DOF.X,l.DOF.Y,l.DOF.Z),w.solveRotation&&e.push(l.DOF.EX,l.DOF.EY,l.DOF.EZ),C.setGoalDoF(...e)}o.setPosition(0,.5,0),n.addChild(o),x.updateMatrixWorld(!0),b.matrix.set(...o.matrixWorld).transpose(),b.matrix.decompose(b.position,b.quaternion,b.scale),C=new l.Goal,C.makeClosure(o),E=new l.IKRootsHelper(x),E.setResolution(window.innerWidth,window.innerHeight),E.traverse((e=>{e.material&&e.material.color.set(15277667).convertSRGBToLinear()})),f.add(E),g=new l.Solver(x),Object.assign(g,u),D(),c=new r.GUI,c.width=350,c.add(w,"controls",["rotate","translate"]).listen().onChange((e=>{R.setMode(e)})),c.add(w,"solvePosition").onChange(D),c.add(w,"solveRotation").onChange(D),R.addEventListener("mouseUp",(()=>{x.updateMatrixWorld(!0),b.matrix.set(...o.matrixWorld).transpose(),b.matrix.decompose(b.position,b.quaternion,b.scale)})),window.addEventListener("resize",(()=>{const e=window.innerWidth,t=window.innerHeight,n=e/t;m.setSize(e,t),v.aspect=n,v.updateProjectionMatrix(),E.setResolution(window.innerWidth,window.innerHeight)})),window.addEventListener("keydown",(e=>{switch(e.key){case"w":R.setMode("translate"),w.controls="translate";break;case"e":R.setMode("rotate"),w.controls="rotate";break;case"f":P.target.set(0,0,0),P.update()}}))}(),function e(){requestAnimationFrame(e),C.setPosition(b.position.x,b.position.y,b.position.z),C.setQuaternion(b.quaternion.x,b.quaternion.y,b.quaternion.z,b.quaternion.w),h.textContent=g.solve().map((e=>l.SOLVE_STATUS_NAMES[e])).join("\n"),m.render(f,v),p.update()}();
//# sourceMappingURL=goals.1003dc22.js.map
